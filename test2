getgenv().LvlFarm = true

wait(3)

local queueteleport = syn and syn.queue_on_teleport or queue_on_teleport or fluxus and fluxus.queue_on_teleport
if queueteleport then
queueteleport("loadstring(game:HttpGet('https://raw.githubusercontent.com/Mixplaylikeencoder/Games/refs/heads/main/test2'))()")
end

if getgenv().LvlFarm then
    local TeleportService = game:GetService("TeleportService")
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local Players = game:GetService("Players")
    local VirtualInputManager = game:GetService("VirtualInputManager")
    local Workspace = game:GetService("Workspace")
    local Player = game:GetService("Players").LocalPlayer
    local Character = Player.Character or Player.CharacterAdded:Wait()
    local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
    local PlayerGui = Player:WaitForChild("PlayerGui")

    if game.PlaceId == 10450270085 then
        repeat task.wait() until game:IsLoaded()
        TeleportService:Teleport(119359147980471, Player)
        
    elseif game.PlaceId == 119359147980471 then
        repeat task.wait() until game:IsLoaded()
        local replicatedData = Player:FindFirstChild("ReplicatedData")
        if replicatedData and replicatedData:FindFirstChild("level") then
            replicatedData.level.Value = math.huge
        end
        local ohString1 = "Boss"
        local ohString2 = "Heian Imaginary Demon"
        local ohString3 = "Nightmare"
        local ohString4 = ""
        ReplicatedStorage.Remotes.Server.Raids.CreateLobby:InvokeServer(ohString1, ohString2, ohString3, ohString4)
        task.wait(1)
        ReplicatedStorage.Remotes.Server.Raids.StartLobby:InvokeServer(ohString1)
        
    elseif game.PlaceId == 16379688837 then
        local function pressReplay()
            while getgenv().LvlFarm do
                local ReadyScreen = PlayerGui:FindFirstChild("ReadyScreen")
                if ReadyScreen and ReadyScreen.Enabled then
                    local xi = ReadyScreen:FindFirstChild("Frame")
                    local ReplayButton = xi:FindFirstChild("Replay")
                    if ReplayButton and ReplayButton:IsA("GuiButton") then
                        VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.BackSlash, false, game)
                        task.wait(0.2)
                        VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.Return, false, game)
                        task.wait(0.1)
                        VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.Return, false, game)
                        task.wait(0.1)
                        VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.BackSlash, false, game)
                        VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.BackSlash, false, game)
                        if not ReadyScreen.Enabled then
                            break
                        else
                            print("Replay не была нажата. Продолжаю попытки.")
                        end
                    else
                        print("Кнопка Replay не найдена или неверного типа.")
                    end
                end
                task.wait(0.5) 
            end
        end
        
        local function killDemon()
            while getgenv().LvlFarm do
                local demon = Workspace.Objects and Workspace.Objects.Mobs and Workspace.Objects.Mobs:FindFirstChild("Heian Imaginary Demon")
                if demon and demon:FindFirstChild("Humanoid") then
                    local humanoid = demon.Humanoid
                    local demonPos
                    if demon:FindFirstChild("HumanoidRootPart") then
                        demonPos = demon.HumanoidRootPart.Position
                    elseif humanoid and humanoid.RootPart then
                        demonPos = humanoid.RootPart.Position
                    else
                        demonPos = nil
                    end

                    if demonPos then
                        HumanoidRootPart.CFrame = CFrame.new(demonPos)
                        humanoid.Health = 0
                    else
                        print("Не удалось получить позицию демона.")
                    end
                else
                    print("Демон Heian Imaginary Demon не найден или у него нет Humanoid.")
                end
                task.wait(0.1) 
            end
        end

        
        local function teleportToBossSpawn()
            while getgenv().LvlFarm do
                local BossSpawn = Workspace.Objects.Spawns and Workspace.Objects.Spawns:FindFirstChild("BossSpawn")
                if BossSpawn then
                    HumanoidRootPart.CFrame = CFrame.new(BossSpawn.Position)
                else
                    print("BossSpawn не найден.")
                end
                task.wait(0.1)
            end
        end

        task.spawn(pressReplay)
        task.spawn(killDemon)
        task.spawn(teleportToBossSpawn)
    end
end
